#
# CDDL HEADER START
#
# The contents of this file are subject to the terms of the
# Common Development and Distribution License (the "License").
# You may not use this file except in compliance with the License.
#
# You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
# or http://www.opensolaris.org/os/licensing.
# See the License for the specific language governing permissions
# and limitations under the License.
#
# When distributing Covered Code, include this CDDL HEADER in each
# file and include the License file at usr/src/OPENSOLARIS.LICENSE.
# If applicable, add the following below this CDDL HEADER, with the
# fields enclosed by brackets "[]" replaced with your own identifying
# information: Portions Copyright [yyyy] [name of copyright owner]
#
# CDDL HEADER END
#
#
# Copyright 2009 Sun Microsystems, Inc.  All rights reserved.
# Use is subject to license terms.
#
# Makefile for Java Print Manager client
#
include		$(SRC)/Makefile.master
include         $(SRC)/cmd/Makefile.cmd


CLASSPATH=	$(SRC)/cmd/print/printmgr

CLASSFILES = 	Constants.class \
		pmAuthOptions.class \
		pmHelpFrame.class \
		pmTop.class \
		pmResources.class \
		pmCopyright.class \
		pmUtility.class \
		pmCalls.class \
		pmLoad.class \
		pmDelete.class \
		pmAccess.class \
		pmButtonScreen.class \
		pmInstallScreen.class \
		pmInstallPrinter.class \
		pmOKCancelDialog.class \
		pmMessageDialog.class \
		pmLogin.class \
		pmLogDisplay.class \
		pmHelpDetailPanel.class \
		pmHelpContent.class \
		pmHelpController.class \
		pmHelpDetailPanel.class \
		pmHelpIndexPanel.class \
		pmHelpItem.class \
		pmHelpRepository.class \
		pmHelpSearchPanel.class \
		BST.class \
		BSTItem.class \
		pmGuiException.class \
		pmHelpException.class \
		pmAddAccessFailedException.class \
		pmAddPrinterFailedException.class \
		pmIncompleteFormException.class \
		pmLoginFailedException.class \
		pmModifyPrinterFailedException.class \
		pmPrinterExistsException.class \
		pmDeleteFailedException.class \
		pmMustBeRemoteServerException.class \
		pmUserCancelledException.class \
		pmNullSelectedPrinterException.class \
		pmNeedPPDCacheException.class \
		pmCacheMissingPPDException.class \
		pmFindFrame.class \
		pmAboutBox.class \
		pmFrame.class \
		pmButton.class \
		pmTextField.class \
	        pmAuthOptions.class \
		pmOther.class

JAVAFILES =	$(CLASSFILES:.class=.java)

MSGDIRS =	$(ROOT)/usr/share/lib/locale \
		$(ROOT)/usr/share/lib/locale/com \
		$(ROOT)/usr/share/lib/locale/com/sun \
		$(ROOT)/usr/share/lib/locale/com/sun/admin \
		$(ROOT)/usr/share/lib/locale/com/sun/admin/pm \
		$(ROOT)/usr/share/lib/locale/com/sun/admin/pm/client

MSGDIR =	$(ROOT)/usr/share/lib/locale/com/sun/admin/pm/client
MSGJAVAFILES =	pmResources.java pmHelpResources.java
MSGFILES =	$(MSGJAVAFILES:%=$(MSGDIR)/%)

$(MSGFILES):=	FILEMODE = 644

CLEANFILES=	*.class pmHelpResources.java pmCopyright.java \
	    	helptools/*.class helptools/parsehelp
CLOBBERFILES=

#
# raw-text help files
#
HELPFILES= ./raw-help/*.rawhlp

#
# text file containing comments to be bound into the help resource bundle
#
HELP_COMMENTS=./help-l10n-comments.txt

install all: pmCopyright.java $(CLASSFILES) help

pmCopyright.java: pm_gen_copyright
	$(SH) ./pm_gen_copyright

#
# pmHelpResources.java is generated by parsing raw help text
#
pmHelpResources.java:	$(HELP_COMMENTS) \
			$$(HELPFILES) \
			helptools/parseMain.class \
			helptools/parsehelp
	$(RM) pmHelpResources.*
	helptools/parsehelp -C $(HELP_COMMENTS) -D $(CLASSPATH) \
		-J $(JAVA_ROOT) $(HELPFILES)

help: pmHelpResources.class

_msg:	$(MSGDIRS) help $(MSGFILES)

$(MSGDIR)/%: %
	$(INS.file)

$(MSGDIRS):
	$(INS.dir)

jstyle:
	jstyle $(JAVAFILES)

lint:
clean:
	$(RM) $(CLEANFILES)
clobber: clean
